/**
 * SCSS Mixins
 *
 * WHY MIXINS?
 * Many components share identical styling (cards, buttons, form placeholders).
 * Defining these patterns once means:
 * 1. One place to change shadow/radius/padding values
 * 2. Components only specify what's different
 * 3. Consistent visual language across the site
 *
 * HOW TO USE:
 * In your component's <style> block:
 *   @use '../styles/mixins' as *;
 *   .my-card { @include card-base(2em); }
 */

@use 'variables' as *;

// ============================================
// RESPONSIVE BREAKPOINTS
// WHY: Consistent breakpoints across all components.
// Mobile-first: styles apply to mobile, then override for larger screens.
// ============================================
@mixin mobile {
  @media (max-width: #{$breakpoint-mobile}) {
    @content;
  }
}

@mixin tablet {
  @media (min-width: #{$breakpoint-mobile + 1}) and (max-width: #{$breakpoint-tablet}) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: #{$breakpoint-tablet + 1}) {
    @content;
  }
}

// ============================================
// CONTAINERS
// ============================================
@mixin container {
  width: $container-width;
  max-width: $container-max-width;
  margin: 0 auto;

  @include mobile {
    width: 90%;
  }
}

@mixin full-width-container {
  width: $full-width-container-width;
  max-width: $full-width-container-max-width;
  margin: 0 auto;
}

// ============================================
// SECTION SPACING
// ============================================
@mixin section-padding {
  padding: $section-padding-desktop 0;

  @include mobile {
    padding: $section-padding-mobile 0;
  }
}

// ============================================
// PARALLAX BACKGROUND
// ============================================
@mixin parallax-bg($overlay-opacity: 0.71) {
  position: relative;
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba($color-dark-charcoal, $overlay-opacity);
    z-index: 1;
  }

  > * {
    position: relative;
    z-index: 2;
  }

  // Disable parallax on mobile for performance
  @include mobile {
    background-attachment: scroll;
  }
}

// ============================================
// IMAGE SHADOW
// ============================================
@mixin image-shadow {
  box-shadow: $shadow-image;
}

// ============================================
// HOVER TRANSITION
// ============================================
@mixin hover-transition($property: all) {
  transition: #{$property} $transition-fast;

  &:hover {
    @content;
  }
}

// ============================================
// UPPERCASE HEADING STYLE
// ============================================
@mixin uppercase-heading {
  font-family: $font-heading;
  font-weight: $font-weight-bold;
  text-transform: uppercase;
  line-height: $line-height-heading;
}

// ============================================
// BUTTON STYLE
// ============================================
@mixin button-base {
  display: inline-block;
  padding: 12px 24px;
  font-family: $font-heading;
  font-weight: $font-weight-bold;
  text-transform: uppercase;
  text-decoration: none;
  border: none;
  border-radius: $border-radius-button;
  cursor: pointer;
  transition:
    transform $transition-fast,
    filter $transition-fast,
    box-shadow $transition-fast;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

@mixin button-primary {
  @include button-base;
  background-color: $color-accent;
  color: white;

  &:hover {
    color: white;
    transform: translateY(-2px);
    filter: brightness(0.9);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
  }
}

@mixin button-secondary {
  @include button-base;
  background-color: $color-secondary;
  color: white;

  &:hover {
    color: white;
    transform: translateY(-2px);
    filter: brightness(0.9);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
  }
}

// ============================================
// CONTENT SECTION
// WHY: Most pages have an intro section with markdown content. This ensures
// consistent typography (18px, 1.8 line-height) across all prose sections.
// The $centered param handles pages that center their intro vs left-align.
// ============================================
@mixin content-section($centered: false, $max-width: 800px) {
  max-width: $max-width;
  margin: 0 auto;
  @if $centered {
    text-align: center;
  }

  :global(p) {
    font-size: 18px;
    line-height: 1.8;
    margin-bottom: 1.5em;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

// ============================================
// ICON CIRCLE
// For circular icon containers (activities, benefits, etc.)
// ============================================
@mixin icon-circle($size: 70px, $icon-size: 1.75rem, $bg-color: $color-accent) {
  width: $size;
  height: $size;
  background: $bg-color;
  border-radius: $border-radius-circle;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1em;

  i {
    font-size: $icon-size;
    color: white;
  }
}

// ============================================
// FORM PLACEHOLDER
// WHY: Contact, Donate, and Membership pages all have identical form
// placeholders. Dashed border signals "content coming here" to developers.
// ============================================
@mixin form-placeholder($bg-color: $color-light-tan) {
  max-width: 600px;
  margin: 2em auto 0;
  padding: 3em 2em;
  background: $bg-color;
  border: 2px dashed rgba($color-text-dark, 0.2);
  border-radius: $border-radius-card;
  text-align: center;

  .placeholder-text {
    font-size: 1.125rem;
    color: rgba($color-text-dark, 0.6);
    margin-bottom: 0.5em;
  }

  .placeholder-note {
    font-size: 0.875rem;
    color: rgba($color-text-dark, 0.4);
    font-family: monospace;
    margin: 0;
  }
}

// ============================================
// CARD BASE
// WHY: 7+ components use identical card styling. Centralizing here means
// one place to change the shadow/radius/padding for consistency.
// ============================================
@mixin card-base($padding: 1.5em) {
  background: white;
  padding: $padding;
  border-radius: $border-radius-card;
  // WHY 10px offset shadow: Creates depth without looking like it's floating.
  // 0.08 opacity is visible but subtle - doesn't compete with content.
  box-shadow: 10px 10px 0px rgba($color-text-dark, 0.08);
}

// WHY SEPARATE FROM card-base:
// Not all cards should have hover effects. Static info cards (ContactCard,
// PrincipleCard) don't need hover states, but clickable cards (ResourceCard,
// PricingCard) do. Splitting lets components opt-in to hover behavior.
@mixin card-hover {
  transition:
    transform $transition-fast,
    box-shadow $transition-fast;

  &:hover {
    transform: translateY(-5px);
    // Slightly darker shadow on hover reinforces the "lifting" effect
    box-shadow: 10px 10px 0px rgba($color-text-dark, 0.12);
  }
}

// ============================================
// CTA SECTION DARK
// For dark call-to-action sections
// ============================================
@mixin cta-section-dark {
  .cta-text {
    color: rgba(white, 0.9);
    font-size: 1.125rem;
    margin-bottom: 1.5em;
  }

  h2 {
    color: white;
  }
}
