---
interface Props {
  event: any;
  href: string;
}

const { event, href } = Astro.props;
const { Content } = await event.render();

const startDate = new Date(event.data.startDate);
const endDate = new Date(event.data.endDate);

const startDateStr = startDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
});

const endDateStr = endDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
});

const location = `${event.data.location.venue} • ${event.data.location.city}, ${event.data.location.state}`;
---

<div class="event-card-expanded">
  <h3>
    <a href={href}>{event.data.title}</a>
  </h3>

  <p class="event-date">
    {startDateStr} – {endDateStr}
  </p>

  <p class="event-location">
    {location}
  </p>

  <div class="event-body">
    <Content />
  </div>

  <a href={href} class="btn btn--primary">Learn More</a>
</div>

<style lang="scss">
@use '../styles/variables' as *;
@use '../styles/mixins' as *;

.event-card-expanded {
  padding: 3em 2.5em;
  background: white;
  border-radius: 0;
  box-shadow: none;

  @include mobile {
    padding: 2em 1.5em;
  }

  h3 {
    color: $color-accent;
    font-size: 24px;
    margin: 0 0 0.75em 0;

    a {
      color: inherit;
      text-decoration: none;

      &:hover {
        color: $color-primary;
      }
    }
  }

  .event-date {
    color: $color-accent;
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 0.5em;
  }

  .event-location {
    color: $color-text-dark;
    font-size: 15px;
    margin-bottom: 1.5em;
  }

  .event-body {
    margin-bottom: 1.5em;

    p {
      color: $color-text-dark;
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: 1em;

      &:nth-of-type(n+3) {
        display: none;
      }
    }

    h2,
    h3,
    h4 {
      display: none;
    }

    ul,
    ol {
      display: none;
    }
  }

  .btn {
    display: inline-block;
  }
}
</style>
