---
import { marked } from 'marked';

interface Props {
  event: any;
  href: string;
}

const { event, href } = Astro.props;

const startDate = new Date(event.data.startDate);
const endDate = new Date(event.data.endDate);

const startDateStr = startDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const endDateStr = endDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const location = `${event.data.location.venue}, ${event.data.location.city}, ${event.data.location.state}`;

const shortDescriptionHtml = event.data.shortDescription
  ? marked.parse(event.data.shortDescription)
  : '';
---

<div class="event-card-expanded">
  <h3>{event.data.title}</h3>

  <p class="event-meta">
    {startDateStr} â€“ {endDateStr}
  </p>

  <p class="event-meta">
    {location}
  </p>

  {shortDescriptionHtml && (
    <div class="event-description" set:html={shortDescriptionHtml}></div>
  )}
</div>

<style lang="scss">
@use '../styles/variables' as *;
@use '../styles/mixins' as *;

.event-card-expanded {
  padding: 0 0 3em 0;
  background: transparent;
  text-align: center;
  max-width: 900px;
  margin: 0 auto;

  @include mobile {
    padding: 0 0 2em 0;
  }

  h3 {
    color: $color-accent;
    font-size: 32px;
    font-weight: 700;
    margin: 0 0 0.5em 0;
    text-align: center;

    @include mobile {
      font-size: 26px;
    }
  }

  .event-meta {
    color: $color-text-dark;
    font-size: 15px;
    margin-bottom: 0.5em;
    text-align: center;
  }

  .event-description {
    margin-top: 1.5em;
    text-align: left;

    p {
      color: $color-text-dark;
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: 1.2em;

      strong {
        font-weight: 700;
      }

      em {
        font-style: italic;
      }
    }

    a {
      color: $color-secondary;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }
}
</style>
