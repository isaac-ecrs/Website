---
import { Image } from 'astro:assets';
import { getEntry } from 'astro:content';
import logoImg from '../assets/images/ecrs-logo.png';
import cloudBg from '../assets/images/cloud-nav-bg.gif';

const navData = await getEntry('navigation', 'main');
const navItems = navData?.data.items || [];
---

<header class="site-header" style={`background-image: url(${cloudBg.src})`}>
  <div class="container header-container">
    <div class="logo">
      <a href="/">
        <Image src={logoImg} alt="ECRS Logo" />
      </a>
    </div>
    <nav class="main-nav">
      <ul>
        {navItems.map((item) => (
          <li>
            <a href={item.href} class={item.isButton ? 'btn btn--primary' : ''}>
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </div>
</header>

<style lang="scss">
@use '../styles/variables' as *;
@use '../styles/mixins' as *;

.site-header {
  position: fixed;
  top: 28px;
  left: 0;
  right: 0;
  background-color: white;
  background-repeat: repeat-x;
  background-size: auto;
  box-shadow: $shadow-subtle;
  z-index: 1000;
  padding: 1em 0;

  .header-container {
    @include full-width-container;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo {
    img {
      height: 60px;
      width: auto;
    }
  }

  .main-nav {
    ul {
      display: flex;
      list-style: none;
      gap: 2em;
      align-items: center;

      @include mobile {
        display: none; // Mobile menu implementation later
      }
    }

    a {
      color: $color-primary;
      text-decoration: none;
      font-family: $font-heading;
      font-weight: $font-weight-bold;
      text-transform: uppercase;
      font-size: 14px;
      transition: color $transition-fast;

      &:hover {
        color: $color-accent;
      }

      &.btn {
        color: white;
        padding: 8px 16px;
        font-size: 12px;

        &:hover {
          color: white;
        }
      }
    }
  }
}
</style>
