---
interface Props {
  href: string;            // Required - cards are always clickable
  variant?: 'vertical' | 'horizontal';  // Layout direction (default: vertical)
  isPast?: boolean;        // For dimmed styling (events only)
  class?: string;          // Additional classes
}

const { href, variant = 'vertical', isPast = false, class: additionalClass = '' } = Astro.props;
---

<a href={href} class={`card card--${variant} ${isPast ? 'card--past' : ''} ${additionalClass}`}>
  <slot name="media" />
  <slot name="content" />
  <slot name="cta" />
</a>

<style lang="scss">
@use '../styles/variables' as *;
@use '../styles/mixins' as *;

.card {
  display: block;
  background: white;
  padding: 2em;
  border-radius: $border-radius-card;
  box-shadow: 10px 10px 0px rgba($color-text-dark, 0.08);
  transition: transform $transition-fast, box-shadow $transition-fast;
  text-decoration: none;
  color: inherit;
  cursor: pointer;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 10px 10px 0px rgba($color-text-dark, 0.12);
  }

  &:focus-visible {
    outline: 2px solid $color-accent;
    outline-offset: 4px;
  }

  &.card--past {
    opacity: 0.7;
    filter: brightness(90%);
  }

  // Layout variants
  &.card--vertical {
    display: flex;
    flex-direction: column;
  }

  &.card--horizontal {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 2em;
    align-items: start;

    @include mobile {
      grid-template-columns: 1fr;
      gap: 1.5em;
    }
  }
}

// Shared CTA link styling (works for slotted content)
:global(.card-link) {
  display: inline-block;
  color: $color-accent;
  font-weight: 600;
  text-decoration: none;
  transition: color $transition-fast;
  pointer-events: none;  // Parent card handles click
}

.card:hover :global(.card-link),
.card:focus-visible :global(.card-link) {
  color: $color-teal;
}
</style>
