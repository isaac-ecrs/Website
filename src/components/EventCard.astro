---
import Card from './Card.astro';

interface Props {
  event: any;
  isPast?: boolean;
  showImage?: boolean;
  href: string;
}

const { event, isPast = false, showImage = true, href } = Astro.props;

const startDate = new Date(event.data.startDate);
const endDate = new Date(event.data.endDate);

const startDateStr = startDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
});

const endDateStr = endDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
});

const location = `${event.data.location.venue} • ${event.data.location.city}, ${event.data.location.state}`;
---

<Card href={href} variant="horizontal" isPast={isPast}>
  {showImage && event.data.image && (
    <div slot="media" class="event-image">
      <img src={event.data.image} alt={event.data.title} />
    </div>
  )}

  <div slot="content" class="event-content">
    <h3 class="event-title">{event.data.title}</h3>

    <p class="event-date">
      {startDateStr} – {endDateStr}
    </p>

    <p class="event-location">
      {location}
    </p>

    <p class="event-cost">
      Cost: {event.data.cost}
    </p>
  </div>

  <span slot="cta" class="card-link">Learn More →</span>
</Card>

<style lang="scss">
@use '../styles/variables' as *;
@use '../styles/mixins' as *;

.event-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  border-radius: 3px;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 3px;
  }
}

.event-content {
  .event-title {
    color: $color-primary;
    margin-bottom: 0.75em;
    margin-top: 0;
  }

  .event-date {
    font-weight: 600;
    color: $color-accent;
    margin-bottom: 0.5em;
    font-size: 16px;
  }

  .event-location {
    color: rgba($color-text-dark, 0.7);
    margin-bottom: 0.75em;
    font-size: 15px;
  }

  .event-cost {
    font-weight: 600;
    margin-bottom: 1.5em;
    font-size: 15px;
  }
}
</style>
