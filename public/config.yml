backend:
  name: git-gateway
  branch: main

# Enable editorial workflow (Draft -> In Review -> Ready -> Published)
publish_mode: editorial_workflow

# Local backend for development/testing
local_backend: true

# Site URL for "View Live" button
site_url: http://localhost:4321

media_folder: src/assets/images
public_folder: /assets/images

collections:
  - name: leaders
    label: Leaders & Instructors
    folder: src/content/leaders
    extension: md
    format: yaml-frontmatter
    create: true
    fields:
      - { label: 'Name', name: 'name', widget: 'string' }
      - {
          label: 'Title/Role',
          name: 'title',
          widget: 'string',
          required: false,
          placeholder: 'e.g., Board Chair, Instructor',
        }
      - { label: 'Bio', name: 'bio', widget: 'markdown' }
      - {
          label: 'Location',
          name: 'location',
          widget: 'string',
          required: false,
          placeholder: 'e.g., Chicago, IL',
        }
      - {
          label: 'Profile Image',
          name: 'image',
          widget: 'image',
          required: false,
          allow_multiple: false,
          media_folder: '../assets/images/leaders',
          public_folder: '/assets/images/leaders',
        }

  - name: classes
    label: Classes
    folder: src/content/classes
    extension: md
    format: yaml-frontmatter
    create: true
    fields:
      - { label: 'Class Title', name: 'title', widget: 'string' }
      - {
          label: 'Leader',
          name: 'leader',
          widget: 'relation',
          collection: 'leaders',
          search_fields: ['name'],
          value_field: 'name',
        }
      - label: 'Class Descriptions (by Year)'
        name: 'descriptions'
        widget: 'list'
        fields:
          - { label: 'Year', name: 'year', widget: 'number' }
          - { label: 'Description', name: 'content', widget: 'text' }

  - name: pages
    label: Pages
    folder: src/content/pages
    extension: md
    format: yaml-frontmatter
    create: false
    slug: '{{slug}}'
    fields:
      - { label: 'Title', name: 'title', widget: 'string' }
      - label: 'Hero Section'
        name: 'hero'
        widget: 'object'
        fields:
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Subtitle', name: 'subtitle', widget: 'string' }
          - {
              label: 'Background Image',
              name: 'backgroundImage',
              widget: 'hidden',
              default: '../../assets/images/hero-bg.jpg',
            }
          - { label: 'CTA Text', name: 'ctaText', widget: 'string' }
          - { label: 'CTA Link', name: 'ctaLink', widget: 'string' }
      - label: 'Feature Cards'
        name: 'featureCards'
        widget: 'list'
        fields:
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Description', name: 'description', widget: 'text' }
          - { label: 'Icon', name: 'icon', widget: 'hidden' }
      - label: 'Donation CTA'
        name: 'donationCta'
        widget: 'object'
        fields:
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Description', name: 'description', widget: 'text' }
          - { label: 'Button Text', name: 'buttonText', widget: 'string' }
          - { label: 'Button Link', name: 'buttonLink', widget: 'string' }
      - { label: 'Body', name: 'body', widget: 'markdown' }

  - name: events
    label: Events
    folder: src/content/events
    extension: md
    format: yaml-frontmatter
    create: true
    duplicate: true
    slug: '{{eventSlug}}'
    preview_path: '/preview/events/{{slug}}'
    sortable_fields: ['startDate', 'endDate', 'title']
    sort: 'startDate:desc'
    fields:
      - {
          label: 'Title',
          name: 'title',
          widget: 'string',
          placeholder: 'Winter Adventure 2025',
        }
      - {
          label: 'Event Slug',
          name: 'eventSlug',
          widget: 'string',
          required: true,
          placeholder: 'winter-adventure-2025',
          hint: 'Standardized URL slug. Format: lowercase-title-with-hyphens-YYYY. Example: winter-adventure-2025',
          pattern:
            [
              '^[a-z0-9-]+-\d{4}$',
              'Must be lowercase, hyphenated, and end with year (e.g., winter-adventure-2025)',
            ],
        }
      - {
          label: 'Start Date & Time',
          name: 'startDate',
          widget: 'datetime',
          hint: 'When the event begins (include check-in time for multi-day events)',
        }
      - {
          label: 'End Date & Time',
          name: 'endDate',
          widget: 'datetime',
          hint: 'When the event ends (include check-out time for multi-day events)',
        }
      - label: 'Location'
        name: 'location'
        widget: 'object'
        fields:
          - {
              label: 'Venue Name',
              name: 'venue',
              widget: 'string',
              placeholder: 'The Y at Watson Woods',
            }
          - {
              label: 'Address',
              name: 'address',
              widget: 'string',
              placeholder: '9620 Dry Run Road',
              hint: "Use 'TBD' or 'Location in the [area] area TBD' if not yet determined",
            }
          - {
              label: 'City',
              name: 'city',
              widget: 'string',
              placeholder: 'Painted Post',
            }
          - {
              label: 'State',
              name: 'state',
              widget: 'string',
              placeholder: 'PA',
            }
          - {
              label: 'ZIP Code',
              name: 'zip',
              widget: 'string',
              required: false,
              placeholder: '19086',
              hint: 'Leave empty if location is TBD',
            }
          - {
              label: 'Venue Website',
              name: 'website',
              widget: 'string',
              required: false,
              placeholder: 'https://example.com',
              hint: "Optional link to venue's website",
            }
      - {
          label: 'Event Image',
          name: 'image',
          widget: 'string',
          required: false,
          placeholder: '/events/winter-adventure.jpg',
          hint: 'Path to event image in /public/events/ folder',
        }
      - {
          label: 'Cost Summary',
          name: 'cost',
          widget: 'string',
          placeholder: 'Tuition: $110/adult; Room & Board: $355–$820/person',
          hint: "Brief overview of costs. Use 'TBD' or 'Contact for pricing' if not yet available",
        }
      - {
          label: 'Registration Email',
          name: 'registrationEmail',
          widget: 'string',
          default: 'registration@ecrs.org',
        }
      - {
          label: 'Short Description',
          name: 'shortDescription',
          widget: 'text',
          required: false,
          placeholder: 'A creative and joyous alternative holiday experience...',
          hint: 'Optional brief summary displayed on event cards. Leave empty if the main description is sufficient',
        }
      - label: 'Class Periods & Offerings'
        name: 'classPeriods'
        widget: 'list'
        required: false
        fields:
          - {
              label: 'Period Name',
              name: 'period',
              widget: 'string',
              placeholder: 'Morning First Period (9:00–10:40 AM)',
            }
          - label: 'Class Offerings'
            name: 'offerings'
            widget: 'list'
            fields:
              - {
                  label: 'Class',
                  name: 'class',
                  widget: 'relation',
                  collection: 'classes',
                  search_fields: ['title'],
                  value_field: 'title',
                }
              - {
                  label: "Which Year's Description?",
                  name: 'descriptionYear',
                  widget: 'number',
                  hint: 'Leave blank to use most recent description',
                }
              - {
                  label: 'Days Offered',
                  name: 'days',
                  widget: 'string',
                  required: false,
                  placeholder: 'All 4 days',
                }
              - {
                  label: 'Age Group',
                  name: 'age',
                  widget: 'string',
                  required: false,
                  placeholder: '12+',
                }
              - {
                  label: 'Additional Note',
                  name: 'note',
                  widget: 'text',
                  required: false,
                  placeholder: 'e.g., Limited class size; advance registration required.',
                }
      - {
          label: 'Description',
          name: 'body',
          widget: 'markdown',
          hint: 'Full event description with details, schedule, policies, etc. Supports markdown formatting',
        }
